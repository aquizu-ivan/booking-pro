generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum EstadoReserva {
  CONFIRMADA
  CANCELADA
}

model Slot {
  id     String   @id @default(uuid()) @db.Uuid
  fecha  DateTime @db.Date
  inicio DateTime
  fin    DateTime
  activo Boolean

  reserva Reserva?

  @@unique([fecha, inicio])
}

model Reserva {
  id       String         @id @default(uuid()) @db.Uuid
  slotId   String         @unique @db.Uuid
  nombre   String
  email    String
  telefono String?
  estado   EstadoReserva
  creadaEn DateTime       @default(now())

  slot Slot @relation(fields: [slotId], references: [id], onDelete: Restrict, onUpdate: Cascade)
}
